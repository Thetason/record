# CSV/Excel 대량 업로드 기능 완전 테스트 가이드

## 🎯 테스트 목표
CSV/Excel 파일을 통한 리뷰 대량 업로드 기능이 완벽하게 작동하는지 확인

## 🚀 사전 준비

### 1. 개발 서버 실행
```bash
cd ~/record
npm run dev
```

### 2. 테스트 파일 준비
다음 테스트 파일들이 생성되어 있습니다:
- `test_reviews.csv` - 다양한 컬럼명 테스트
- `test_scenario_2.csv` - 누락 데이터 처리 테스트
- `test_scenario_3.csv` - 대량 데이터 처리 테스트 (150개 리뷰)
- `test_scenario_4.csv` - 중복 데이터 처리 테스트
- `test_scenario_5.csv` - 다양한 날짜 형식 테스트
- `test_scenario_6.csv` - 특수문자 및 긴 텍스트 테스트

## 📋 테스트 시나리오

### 테스트 1: 기본 기능 테스트
**파일:** `test_reviews.csv`
**목적:** 다양한 컬럼명 지원 및 기본 업로드 기능

**테스트 절차:**
1. http://localhost:3000/dashboard/bulk-upload 접속
2. 로그인 (테스트 계정 필요)
3. CSV/Excel 업로드 탭 선택
4. `test_reviews.csv` 파일 업로드
5. 진행률 표시 확인
6. 결과 확인

**기대 결과:**
- 한글/영문 컬럼명 모두 정상 인식
- 13개 리뷰 중 유효한 리뷰만 추가
- 에러 없이 완료

### 테스트 2: 데이터 검증 테스트
**파일:** `test_scenario_2.csv`
**목적:** 필수 필드 누락 시 에러 처리

**테스트 절차:**
1. `test_scenario_2.csv` 업로드
2. 에러 메시지 상세 확인

**기대 결과:**
- 누락된 필수 필드에 대한 구체적인 에러 메시지
- 유효한 데이터만 처리
- 오류 상세 목록 표시

### 테스트 3: 대량 데이터 성능 테스트
**파일:** `test_scenario_3.csv`
**목적:** 150개 리뷰 대량 처리 성능

**테스트 절차:**
1. `test_scenario_3.csv` 업로드 (150개 리뷰)
2. 처리 시간 측정
3. 진행률 표시 확인

**기대 결과:**
- 5초 이내 처리 완료
- 배치 처리로 안정적 처리
- 진행률 단계별 표시

### 테스트 4: 중복 데이터 처리 테스트
**파일:** `test_scenario_4.csv`
**목적:** 중복 리뷰 자동 감지 및 제외

**테스트 절차:**
1. `test_scenario_4.csv` 업로드
2. 중복 처리 결과 확인

**기대 결과:**
- 중복 리뷰 자동 감지
- 중복 제외 개수 표시
- 유효한 리뷰만 추가

### 테스트 5: 날짜 형식 처리 테스트
**파일:** `test_scenario_5.csv`
**목적:** 다양한 날짜 형식 파싱

**테스트 절차:**
1. `test_scenario_5.csv` 업로드
2. 날짜 파싱 결과 확인

**기대 결과:**
- 6가지 날짜 형식 모두 정상 파싱
- 2024-01-01, 2024.01.01, 2024/01/01 등 지원
- 잘못된 날짜는 현재 날짜로 대체

### 테스트 6: 특수문자 및 긴 텍스트 테스트
**파일:** `test_scenario_6.csv`
**목적:** 특수문자, 줄바꿈, 긴 텍스트 처리

**테스트 절차:**
1. `test_scenario_6.csv` 업로드
2. 특수문자 처리 확인

**기대 결과:**
- 쉼표, 따옴표 포함 텍스트 정상 처리
- 줄바꿈 포함 텍스트 정상 처리
- 2000자 이하 긴 텍스트 정상 처리

## 🧪 추가 테스트

### Excel 파일 테스트
1. 템플릿 다운로드 버튼 클릭
2. "Excel 템플릿" 다운로드
3. Excel 파일 편집 후 업로드
4. CSV와 동일한 결과 확인

### 한글 인코딩 테스트
1. `test_reviews_euckr.csv` 사용
2. 한글 깨짐 없이 정상 처리 확인

### UI/UX 테스트
1. 진행률 표시 확인
   - 파일 읽기 (20%)
   - 데이터 검증 (60%)
   - 데이터베이스 저장 (90%)
2. 에러 메시지 스크롤 가능 확인
3. 성공 시 요약 정보 표시 확인

## ✅ 검증 포인트

### API 응답 구조 확인
```json
{
  "success": true,
  "message": "N개의 리뷰가 성공적으로 추가되었습니다",
  "summary": {
    "totalProcessed": 150,
    "validReviews": 145,
    "successfullyCreated": 140,
    "duplicatesSkipped": 5,
    "validationErrors": 3,
    "processingErrors": 0
  }
}
```

### 데이터베이스 확인
1. 대시보드에서 리뷰 수 증가 확인
2. `/dashboard/reviews`에서 업로드된 리뷰 확인
3. 리뷰 상세 정보 정확성 확인

### 로그 확인
개발자 도구 콘솔에서:
- 에러 로그 없음 확인
- 진행률 로그 확인
- 파싱 결과 로그 확인

## 🔧 문제 해결

### 일반적인 문제
1. **파일 업로드 실패**
   - 파일 크기 10MB 이하 확인
   - 파일 형식 (.csv, .xlsx, .xls) 확인

2. **한글 깨짐**
   - UTF-8 BOM 지원 확인
   - 브라우저 인코딩 설정 확인

3. **성능 이슈**
   - 네트워크 연결 상태 확인
   - 서버 리소스 사용량 확인

### 디버깅 명령어
```bash
# 로그 확인
npm run dev

# 데이터베이스 확인
npx prisma studio

# 테스트 파일 재생성
node test-bulk-upload.js

# 테스트 파일 정리
node test-bulk-upload.js --cleanup
```

## 📊 성능 기준
- **소용량 파일 (< 100행)**: 2초 이내
- **중용량 파일 (100-500행)**: 5초 이내  
- **대용량 파일 (500-1000행)**: 10초 이내
- **메모리 사용량**: 100MB 이하 유지
- **에러율**: 1% 미만

## 🎯 최종 확인사항
- [ ] 모든 테스트 시나리오 통과
- [ ] 에러 메시지 정확성
- [ ] 진행률 표시 정상 동작
- [ ] 한글 인코딩 정상 처리
- [ ] 대량 데이터 안정성
- [ ] UI/UX 만족도
- [ ] 성능 기준 충족

테스트 완료 후 이 체크리스트를 모두 확인하여 CSV/Excel 업로드 기능이 완벽하게 작동함을 검증하세요.